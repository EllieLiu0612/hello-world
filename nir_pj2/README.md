# 主要环境

python>=3.6

pytorch==1.6.0


# 运行步骤

## 第一步：生成数据

下载百度网盘数据并解压（有更新）：链接：https://pan.baidu.com/s/1LMQvf6y9UKEJ1kv7Fkv83w 提取码：udyb

进入 data_loader.py，修改第100行的 `root_dir` 路径为之前解压的路径；

在第193和194行有示例，选择适合的波形；

需要检测异常波形的同学，请在第57和58行之前进行判断，如果是异常波形则不用append当前波形数据；

~~需要选择不同输入（光强度、反射率、吸收率及其组合）的同学，请修改第31行 `_load_org` 函数；~~
选择不同输入（光强度、反射率、吸收率及其组合）请第212-215行的feat_mask

需要增加数据维度的同学，请到第135和153行添加和修改；

然后，运行 `python data_loader.py`，将在 `data/raw` 文件下下生成 `NIR_xxx` 的文件夹，
同时屏幕将打印出 `NIR_xxx` 的对应名称。

## 第二步：运行模型

运行 `python train.py --dataset NIR_xxx --gpu_id 0`

其中 `NIR_xxx` 为之前生成的对应数据集的名称；

`--kernels 1,1,1` 中的横向维度的卷积核大小，不大于输入数据的维度数（当前模型的维度为5，一个原始特征，一个归一化特征，三个平滑特征），涉及到任务2和任务3的同学需要尝试不同的横向维度卷积核；

最后，运行结果请统计出最后的 `test_acc` 和 `best possible` 值并按模板记录。

## 第三步：记录结果值

记录每次试验的效果值（注意记录

【腾讯文档】测试进度表 https://docs.qq.com/sheet/DWGFzQVJ0a2ptZHl5

# 任务分工

## 任务1：检测异常波形

除了 `val_acc` 以外，还请给出异常和正常波形的可视化结果；

人员：张博涵、丁盛

## 任务2

请注意测试不同的波长范围输入；
自行约定试验哪些组合部分，注意强度可以作为mask，筛选出大于20万强度单位的吸收率和反射率，所以组合数应该是大于7的；

人员：丁玫菲（超参调整，train.py里面的lr/wd/dropout/rp_params）、孙鹏磊（波长范围）、徐皓东（强度mask，超参调整，train.py里面的filters/layers/kernels）

## 任务3

请注意测试不同的波长范围输入；
Savitzky-Golay平滑去噪、傅里叶变换降噪、维纳滤波降噪 三个波形已经做好了，但需要进行调参

人员：陈挺（滑窗平滑降噪、高斯去噪、ROF降噪、高斯带阻带通滤波）、
      臧璇（分段Savitzky-Golay平滑去噪、傅里叶变换降噪、维纳滤波降噪、谱减法语音降噪）、
      刘香君（序列前向选择降维、多粒度经验模态分解、椒盐去噪）

## 任务4

unmixing模型

人员：刘维平、陶赟